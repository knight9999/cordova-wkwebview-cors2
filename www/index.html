<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script>
      function callAPI() {
          let xhr = new XMLHttpRequest();
          xhr.open('GET', 'https://ide.s2.monaca.mobi/rakuten_test/hoge.js');
          xhr.onload = function () {
              console.log('--- success ---');
              console.log(xhr.status);
              console.log(xhr.response);
              document.querySelector('#result').innerHTML = xhr.response;
          };
          xhr.onerror = function (event) {
              console.log('--- error ---');
              let errorText = JSON.stringify(event, ["message", "arguments", "type", "name"]);
              console.log(errorText);
              console.log(event);
              document.querySelector('#result').innerHTML = errorText;
          }
          xhr.send();
      }

    </script>
</head>
<body>
  <div>
    <h1>API Test App</h1>
    <div></div>
    <div>Use XMLHttpRequest over on wkwebview-file-xhr plugin</div>
    <button onClick="callAPI();">Call API</button>
    <div></div>
    <div></div>
    <div></div>
    <div>Result</div>
    <div id="result">
    </div>
  </div>
</body>
</html>
